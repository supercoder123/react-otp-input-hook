!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e||self).reactOtpInputHook={},e.react)}(this,function(e,t){var n;!function(e){e.ARROW_RIGHT="ArrowRight",e.ARROW_LEFT="ArrowLeft",e.SPACEBAR=" ",e.BACKSPACE="Backspace",e.ENTER="Enter"}(n||(n={}));const r={maxLength:1,required:!1},u=[n.ARROW_LEFT,n.ARROW_RIGHT,n.BACKSPACE,n.SPACEBAR,n.ENTER],c={numeric:"tel",alphanumeric:"text",password:"password","password-numeric":"password"};e.useOtpInput=({type:e="alphanumeric",onInputValueChange:l,blankAllowed:a=!1,focusOnLoad:o=!1,autoCompleteAttribute:s="off",defaultInlineStyles:i,cycle:p=!1,placeholder:d="",numberOfInputs:f}={})=>{const m=t.useRef({fields:[],uniqueNames:[],currentActiveInputIndex:0,value:"numeric"===e?0:"",totalInputValueLength:0}),[A,I]=t.useState(""),[h,g]=t.useState(""),v=e=>{const t=m.current.fields;if(R(e))return t[e].element.focus(),t[e]},R=e=>e<m.current.fields.length&&e>=0,x=()=>{const e=m.current.currentActiveInputIndex;return m.current.currentActiveInputIndex=R(e+1)?e+1:p?0:e,m.current.currentActiveInputIndex},E=()=>{const e=m.current.currentActiveInputIndex;return m.current.currentActiveInputIndex=R(e-1)?e-1:p?m.current.fields.length-1:e,m.current.currentActiveInputIndex};t.useLayoutEffect(()=>{if(o)try{m.current.fields[0].element.focus()}catch(e){console.error("Cannot find field on load")}m.current.totalInputValueLength=m.current.fields.reduce((e,t)=>e+t.maxLength,0)},[]);const y=(e=0,t)=>{if(t){const n=m.current.fields.length;let r=t.toString().slice(0,n);const u=r.length,c=r;for(let t=e;t<Math.min(n,u);t++){const e=m.current.fields,n=e[t].maxLength;e[t].element.value=r.slice(0,n),r=r.slice(n)}I(c),m.current.value=c}};return{register(o,p=r){const f=p.maxLength?p.maxLength:1;return{autoComplete:s,"aria-label":`otp-input-${o}`,name:`otp-input-${o}`,onKeyDown:t=>{const r=t.target.value,c=t.key;var l;a||c!==n.SPACEBAR||t.preventDefault(),r.length>=f&&c!==n.BACKSPACE&&c!==n.ENTER&&("number"!=typeof(l=t.target).selectionStart||0!=l.selectionStart||l.selectionEnd!=l.value.length)&&t.preventDefault(),"numeric"!==e&&"password-numeric"!==e||/^[\d]$/.test(c)||u.includes(c)||t.preventDefault()},onInput:e=>{const t=e.target.value;t.length>=f&&""!==t&&v(x()),m.current.value=m.current.fields.map(e=>e.element.value).join(""),l&&l(m.current.value),I(m.current.value)},onKeyUp:e=>{const t=e.key;0!==e.target.value.length&&t!==n.ARROW_LEFT&&t!==n.ARROW_RIGHT||(e=>{const t=e.key;t===n.ARROW_LEFT?v(E()):t===n.ARROW_RIGHT?v(x()):t===n.BACKSPACE?v(E()):t===n.SPACEBAR&&e.preventDefault()})(e)},onFocus:e=>{m.current.currentActiveInputIndex=m.current.fields.findIndex(t=>t.element===e.target),e.target.setSelectionRange(0,f)},ref:t.useCallback(t=>{if(t){const n=t.querySelector("input,textarea");n&&(t=n),p.required&&(t.required=p.required),t.maxLength=f,m.current.uniqueNames.push(o),t instanceof HTMLInputElement&&(t.type=c[e]),m.current.fields.push({element:t,inputName:o,maxLength:f})}},[]),style:i,placeholder:d,onPaste:e=>{const t=e.clipboardData.getData("text");y(m.current.currentActiveInputIndex,t)}}},setValue:e=>{y(0,e)},setDisabled:e=>{m.current.fields.forEach(t=>{t.element.disabled=e})},clear:()=>{m.current.currentActiveInputIndex=0,m.current.fields[m.current.currentActiveInputIndex].element.focus(),m.current.fields.forEach(e=>{e.element.value=""}),I("")},value:A,get inputs(){let e=[];if("number"==typeof f&&f>0){for(let t=0;t<f;t++)e.push(this.register(`num-${t}`));return e}return console.warn("Please provide `numOfInputs` to use the input array map"),[]},error:h,setError:g}}});

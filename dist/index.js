var e,t=require("react");!function(e){e.ARROW_RIGHT="ArrowRight",e.ARROW_LEFT="ArrowLeft",e.SPACEBAR=" ",e.BACKSPACE="Backspace",e.ENTER="Enter"}(e||(e={}));const n={maxLength:1,required:!1},r=[e.ARROW_LEFT,e.ARROW_RIGHT,e.BACKSPACE,e.SPACEBAR,e.ENTER],u={numeric:"tel",alphanumeric:"text",password:"password","password-numeric":"password"};exports.useOtpInput=({type:c="alphanumeric",onInputValueChange:l,blankAllowed:a=!1,focusOnLoad:s=!1,autoCompleteAttribute:o="off",defaultInlineStyles:i,cycle:p=!1,placeholder:d="",numberOfInputs:f}={})=>{const A=t.useRef({fields:[],uniqueNames:[],currentActiveInputIndex:0,value:"numeric"===c?0:"",totalInputValueLength:0}),[m,I]=t.useState(""),[h,g]=t.useState(""),v=e=>{const t=A.current.fields;if(R(e))return t[e].element.focus(),t[e]},R=e=>e<A.current.fields.length&&e>=0,E=()=>{const e=A.current.currentActiveInputIndex;return A.current.currentActiveInputIndex=R(e+1)?e+1:p?0:e,A.current.currentActiveInputIndex},x=()=>{const e=A.current.currentActiveInputIndex;return A.current.currentActiveInputIndex=R(e-1)?e-1:p?A.current.fields.length-1:e,A.current.currentActiveInputIndex};t.useLayoutEffect(()=>{if(s)try{A.current.fields[0].element.focus()}catch(e){console.error("Cannot find field on load")}A.current.totalInputValueLength=A.current.fields.reduce((e,t)=>e+t.maxLength,0)},[]);const C=(e=0,t)=>{if(t){const n=A.current.fields.length;let r=t.toString().slice(0,n);const u=r.length,c=r;for(let t=e;t<Math.min(n,u);t++){const e=A.current.fields,n=e[t].maxLength;e[t].element.value=r.slice(0,n),r=r.slice(n)}I(c),A.current.value=c}};return{register(s,p=n){const f=p.maxLength?p.maxLength:1;return{autoComplete:o,"aria-label":`otp-input-${s}`,name:`otp-input-${s}`,onKeyDown:t=>{const n=t.target.value,u=t.key;var l;a||u!==e.SPACEBAR||t.preventDefault(),n.length>=f&&u!==e.BACKSPACE&&u!==e.ENTER&&("number"!=typeof(l=t.target).selectionStart||0!=l.selectionStart||l.selectionEnd!=l.value.length)&&t.preventDefault(),"numeric"!==c&&"password-numeric"!==c||/^[\d]$/.test(u)||r.includes(u)||t.preventDefault()},onInput:e=>{const t=e.target.value;t.length>=f&&""!==t&&v(E()),A.current.value=A.current.fields.map(e=>e.element.value).join(""),l&&l(A.current.value),I(A.current.value)},onKeyUp:t=>{const n=t.key;0!==t.target.value.length&&n!==e.ARROW_LEFT&&n!==e.ARROW_RIGHT||(t=>{const n=t.key;n===e.ARROW_LEFT?v(x()):n===e.ARROW_RIGHT?v(E()):n===e.BACKSPACE?v(x()):n===e.SPACEBAR&&t.preventDefault()})(t)},onFocus:e=>{A.current.currentActiveInputIndex=A.current.fields.findIndex(t=>t.element===e.target),e.target.setSelectionRange(0,f)},ref:t.useCallback(e=>{if(e){const t=e.querySelector("input,textarea");t&&(e=t),p.required&&(e.required=p.required),e.maxLength=f,A.current.uniqueNames.push(s),e instanceof HTMLInputElement&&(e.type=u[c]),A.current.fields.push({element:e,inputName:s,maxLength:f})}},[]),style:i,placeholder:d,onPaste:e=>{const t=e.clipboardData.getData("text");C(A.current.currentActiveInputIndex,t)}}},setValue:e=>{C(0,e)},setDisabled:e=>{A.current.fields.forEach(t=>{t.element.disabled=e})},clear:()=>{A.current.currentActiveInputIndex=0,A.current.fields[A.current.currentActiveInputIndex].element.focus(),A.current.fields.forEach(e=>{e.element.value=""}),I("")},value:m,get inputs(){let e=[];if("number"==typeof f&&f>0){for(let t=0;t<f;t++)e.push(this.register(`num-${t}`));return e}return console.warn("Please provide `numOfInputs` to use the input array map"),[]},error:h,setError:g}};
